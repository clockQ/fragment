function addImage(){$(".blog_comment_body").append("<span class='bot' ></span>                         <span class='top'></span>"),$(".blog_comment_body").before("<div class='body_right' style='float: left;'><a target='_blank'><img  /></a></div>");for(var t=$(".feedbackCon").addClass("clearfix"),e=0;e<t.length;e++){var o=$(t[e]).find("span:last")[0].innerHTML||"http://pic.cnitblog.com/face/sample_face.gif";$(t[e]).find(".body_right img").attr("src",o);var n=$(t[e]).parent().find(".comment_date").next().attr("href");$(t[e]).find(".body_right a").attr("href",n)}}function nextRecTop(){var t=$("#RecentCommentsBlock");if(t.length){var e=t.scrollTop();e++,t.scrollTop(e),e!=t.scrollTop()&&t.scrollTop(0)}}function MobileComment(){var t=setInterval(function(){nextRecTop()},80);$("#RecentCommentsBlock").hover(function(){clearInterval(t)},function(){t=setInterval(function(){nextRecTop()},80)})}function addtbCommentBody_bg(){var t=$("#tbCommentBody");t.hasClass("tbCommentBody_bg")||(t.addClass("tbCommentBody_bg"),t.focus(function(){removetbCommentBody_bg()}))}function focusoutCommentBody_bg(){$("#tbCommentBody").focusout(function(){addtbCommentBody_bg()})}function removetbCommentBody_bg(){$(".tbCommentBody_bg").removeClass("tbCommentBody_bg"),$("#tbCommentBody").unbind("focus")}function resolveTitle(t){return t.replaceAll(" ","-").replaceAll("\\(","").replaceAll("\\)","").replaceAll("（","").replaceAll("）","").toLowerCase()}function GenerateContentList(){for(var t=$("#cnblogs_post_body :header"),e='<a name="_labelTop"></a>',o=0;o<t.length;o++){0==o&&(e+='<div id="navCategory">',e+='<blockquote><p style="font-size: 18pt; color:#a2b4ba"><b>目录</b></p>',e+="<div>");var n="",a=resolveTitle($(t[o]).text());"H1"===t[o].tagName?n='<a style="font-size:18px" href="#'+a+'">'+$(t[o]).text()+"</a><br>":"H2"===t[o].tagName&&(n='<a style="font-size:16px" href="#'+a+'">&emsp;&emsp;'+$(t[o]).text()+"</a><br>"),e+=n}e+="</blockquote></div>";var r=$("#cnblogs_post_body").length;0!=$("#cnblogs_post_body").length&&$($("#cnblogs_post_body")[0]).prepend(e),$($("#cnblogs_post_body")[r-1]).append("<div id='signature'><p>作者：<a href='http://www.cnblogs.com/clockq/'>旻天Clock</a></br>博客样式摘自：<a href='http://www.cnblogs.com/jingmoxukong/'>静默虚空</a></br>欢迎任何形式的转载，但请务必注明出处。</br>限于本人水平，如果文章和代码有表述不当之处，还请各位不吝赐教。</p></div>")}function generateTagClouds(){$(".catListTag>ul").wrap("<div class='wrap' ></div>").parent().css({width:"240px",height:"240px"});$("div.wrap").starfieldTagCloud({range:[-200,300],gravity:-10,xPos:.5,yPos:.5,gravityVector:[0,0,1],interval:100,hoverGravityFactor:0})}function customTimer(t,e){if($(t).length)e();else var o=setInterval(function(){$(t).length&&(clearInterval(o),customTimer(t,e))},100)}String.prototype.replaceAll=function(t,e){return regExp=new RegExp(t,"gm"),this.replace(regExp,e)},$(function(){customTimer("#div_digg",function(){$("#div_digg").append("<div class=''>                        <a href='javascript:void(0);' onclick='c_follow();'>关注</a>                         &nbsp;|&nbsp;                        <a href='#top'>顶部</a>                         &nbsp;|&nbsp;                        <a href='javascript:void(0);' onclick=\" $('#tbCommentBody').focus();\">评论</a>                   </div>")}),GenerateContentList(),customTimer(".catListTag",generateTagClouds),MobileComment(),customTimer(".blog_comment_body",addImage),customTimer("#tbCommentBody",function(){addtbCommentBody_bg(),focusoutCommentBody_bg()})});